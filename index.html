<!DOCTYPE html>
<html>
<head>
  <title>Internet Speed Test</title>
</head>
<body>
  <h1>اختبار سرعة الإنترنت</h1>
  <button onclick="testSpeed()">ابدأ الاختبار</button>
  <p id="result"></p>

  <script>
    function testSpeed() {
      const imageAddr = "https://via.placeholder.com/1000x1000.png"; // حجم الصورة حوالي 1000 كيلوبايت
      const downloadSize = 1000000 * 8; // بحساب البت (1 ميجابايت = 8 ميجابت)
      const startTime = new Date().getTime();

      const download = new Image();
      download.onload = function () {
        const endTime = new Date().getTime();
        const duration = (endTime - startTime) / 1000; // بالثواني
        const speedBps = downloadSize / duration; // بت في الثانية
        const speedMbps = speedBps / (1024 * 1024); // ميجابت في الثانية
        document.getElementById("result").innerText = "سرعة التنزيل: " + speedMbps.toFixed(2) + " ميجابت/ثانية";
      };

      download.onerror = function () {
        document.getElementById("result").innerText = "فشل في تحميل الصورة لاختبار السرعة";
      };

      download.src = imageAddr + "?cache=" + Math.random(); // لمنع التخزين المؤقت
    }
  </script>
</body>
</html>
